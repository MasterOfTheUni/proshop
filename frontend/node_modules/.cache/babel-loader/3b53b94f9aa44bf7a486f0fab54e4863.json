{"ast":null,"code":"import _slicedToArray from \"/Users/alexbrown/Desktop/proshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/alexbrown/Desktop/proshop/frontend/src/screens/UserEditScreen.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport { Form, Button } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport FormContainer from '../components/FormContainer';\nimport { getUserDetails, updateUser } from '../actions/userActions';\nimport { USER_UPDATE_RESET } from '../constants/userConstants';\n\nvar UserEditScreen = function UserEditScreen() {\n  var _useParams = useParams(),\n      userId = _useParams.userId;\n\n  var navigate = useNavigate();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isAdmin = _useState6[0],\n      setIsAdmin = _useState6[1];\n\n  var dispatch = useDispatch();\n  var userDetails = useSelector(function (state) {\n    return state.userDetails;\n  });\n  var loading = userDetails.loading,\n      error = userDetails.error,\n      user = userDetails.user;\n  var userUpdate = useSelector(function (state) {\n    return state.userUpdate;\n  });\n  var loadingUpdate = userUpdate.loading,\n      errorUpdate = userUpdate.error,\n      successUpdate = userUpdate.success;\n  useEffect(function () {\n    console.log(\"UserID: \".concat(userId));\n\n    if (successUpdate) {\n      dispatch({\n        type: USER_UPDATE_RESET\n      });\n      navigate('/admin/userlist');\n    } else {\n      if (user) {\n        if (!user.name || user._id !== userId) {\n          dispatch(getUserDetails(userId));\n        } else {\n          setName(user.name);\n          setEmail(user.email);\n          setIsAdmin(user.isAdmin);\n        }\n      }\n    }\n  }, [dispatch, navigate, userId, user, successUpdate]);\n\n  var submitHandler = function submitHandler(e) {\n    e.preventDefault();\n    dispatch(updateUser({\n      _id: userId,\n      name: name,\n      email: email,\n      isAdmin: isAdmin\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/userlist\",\n    className: \"btn btn-light my-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"Go Back\"), /*#__PURE__*/React.createElement(FormContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Edit User\"), loadingUpdate && /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 27\n    }\n  }), errorUpdate && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, errorUpdate), loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }) : error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, error) : /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"name\",\n    placeholder: \"Enter name\",\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, \"Email Address\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    placeholder: \"Enter email\",\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"isadmin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Check, {\n    type: \"checkbox\",\n    label: \"Is Admin\",\n    checked: isAdmin,\n    onChange: function onChange(e) {\n      return setIsAdmin(e.target.checked);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    variant: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Update\"))));\n};\n\nexport default UserEditScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","useNavigate","Form","Button","useDispatch","useSelector","Message","Loader","FormContainer","getUserDetails","updateUser","USER_UPDATE_RESET","UserEditScreen","userId","navigate","name","setName","email","setEmail","isAdmin","setIsAdmin","dispatch","userDetails","state","loading","error","user","userUpdate","loadingUpdate","errorUpdate","successUpdate","success","console","log","type","_id","submitHandler","e","preventDefault","target","value","checked"],"sources":["/Users/alexbrown/Desktop/proshop/frontend/src/screens/UserEditScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useParams, useNavigate} from 'react-router-dom'\nimport { Form, Button } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport FormContainer from '../components/FormContainer'\nimport { getUserDetails, updateUser } from '../actions/userActions'\nimport { USER_UPDATE_RESET } from '../constants/userConstants'\n\nconst UserEditScreen = () => {\n    const {userId } = useParams()\n\n    const navigate = useNavigate()\n\n  const [name, setName] = useState('')\n  const [email, setEmail] = useState('')\n  const [isAdmin, setIsAdmin] = useState(false)\n\n  const dispatch = useDispatch()\n\n  const userDetails = useSelector((state) => state.userDetails)\n  const { loading, error, user } = userDetails\n\n  const userUpdate = useSelector((state) => state.userUpdate)\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate,\n  } = userUpdate\n\n  useEffect(() => {\n    console.log(`UserID: ${userId}`)\n    if (successUpdate) {\n      dispatch({ type: USER_UPDATE_RESET })\n      navigate('/admin/userlist')\n    } else {\n      if (user) {\n      if (!user.name || user._id !== userId) {\n        dispatch(getUserDetails(userId))\n      } else {\n        setName(user.name)\n        setEmail(user.email)\n        setIsAdmin(user.isAdmin)\n      }\n    }\n    }\n  }, [dispatch, navigate, userId, user, successUpdate])\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n    dispatch(updateUser({ _id: userId, name, email, isAdmin }))\n  }\n\n  return (\n    <>\n      <Link to='/admin/userlist' className='btn btn-light my-3'>\n        Go Back\n      </Link>\n      <FormContainer>\n        <h1>Edit User</h1>\n        {loadingUpdate && <Loader />}\n        {errorUpdate && <Message variant='danger'>{errorUpdate}</Message>}\n        {loading ? (\n          <Loader />\n        ) : error ? (\n          <Message variant='danger'>{error}</Message>\n        ) : (\n          <Form onSubmit={submitHandler}>\n            <Form.Group controlId='name'>\n              <Form.Label>Name</Form.Label>\n              <Form.Control\n                type='name'\n                placeholder='Enter name'\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId='email'>\n              <Form.Label>Email Address</Form.Label>\n              <Form.Control\n                type='email'\n                placeholder='Enter email'\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId='isadmin'>\n              <Form.Check\n                type='checkbox'\n                label='Is Admin'\n                checked={isAdmin}\n                onChange={(e) => setIsAdmin(e.target.checked)}\n              ></Form.Check>\n            </Form.Group>\n\n            <Button type='submit' variant='primary'>\n              Update\n            </Button>\n          </Form>\n        )}\n      </FormContainer>\n    </>\n  )\n}\n\nexport default UserEditScreen"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,SAAf,EAA0BC,WAA1B,QAA4C,kBAA5C;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,iBAA7B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,SAASC,cAAT,EAAyBC,UAAzB,QAA2C,wBAA3C;AACA,SAASC,iBAAT,QAAkC,4BAAlC;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;EAAA,iBACPZ,SAAS,EADF;EAAA,IAClBa,MADkB,cAClBA,MADkB;;EAGzB,IAAMC,QAAQ,GAAGb,WAAW,EAA5B;;EAHyB,gBAKHJ,QAAQ,CAAC,EAAD,CALL;EAAA;EAAA,IAKpBkB,IALoB;EAAA,IAKdC,OALc;;EAAA,iBAMDnB,QAAQ,CAAC,EAAD,CANP;EAAA;EAAA,IAMpBoB,KANoB;EAAA,IAMbC,QANa;;EAAA,iBAOGrB,QAAQ,CAAC,KAAD,CAPX;EAAA;EAAA,IAOpBsB,OAPoB;EAAA,IAOXC,UAPW;;EAS3B,IAAMC,QAAQ,GAAGjB,WAAW,EAA5B;EAEA,IAAMkB,WAAW,GAAGjB,WAAW,CAAC,UAACkB,KAAD;IAAA,OAAWA,KAAK,CAACD,WAAjB;EAAA,CAAD,CAA/B;EAX2B,IAYnBE,OAZmB,GAYMF,WAZN,CAYnBE,OAZmB;EAAA,IAYVC,KAZU,GAYMH,WAZN,CAYVG,KAZU;EAAA,IAYHC,IAZG,GAYMJ,WAZN,CAYHI,IAZG;EAc3B,IAAMC,UAAU,GAAGtB,WAAW,CAAC,UAACkB,KAAD;IAAA,OAAWA,KAAK,CAACI,UAAjB;EAAA,CAAD,CAA9B;EAd2B,IAgBhBC,aAhBgB,GAmBvBD,UAnBuB,CAgBzBH,OAhByB;EAAA,IAiBlBK,WAjBkB,GAmBvBF,UAnBuB,CAiBzBF,KAjByB;EAAA,IAkBhBK,aAlBgB,GAmBvBH,UAnBuB,CAkBzBI,OAlByB;EAqB3BjC,SAAS,CAAC,YAAM;IACdkC,OAAO,CAACC,GAAR,mBAAuBpB,MAAvB;;IACA,IAAIiB,aAAJ,EAAmB;MACjBT,QAAQ,CAAC;QAAEa,IAAI,EAAEvB;MAAR,CAAD,CAAR;MACAG,QAAQ,CAAC,iBAAD,CAAR;IACD,CAHD,MAGO;MACL,IAAIY,IAAJ,EAAU;QACV,IAAI,CAACA,IAAI,CAACX,IAAN,IAAcW,IAAI,CAACS,GAAL,KAAatB,MAA/B,EAAuC;UACrCQ,QAAQ,CAACZ,cAAc,CAACI,MAAD,CAAf,CAAR;QACD,CAFD,MAEO;UACLG,OAAO,CAACU,IAAI,CAACX,IAAN,CAAP;UACAG,QAAQ,CAACQ,IAAI,CAACT,KAAN,CAAR;UACAG,UAAU,CAACM,IAAI,CAACP,OAAN,CAAV;QACD;MACF;IACA;EACF,CAhBQ,EAgBN,CAACE,QAAD,EAAWP,QAAX,EAAqBD,MAArB,EAA6Ba,IAA7B,EAAmCI,aAAnC,CAhBM,CAAT;;EAkBA,IAAMM,aAAa,GAAG,SAAhBA,aAAgB,CAACC,CAAD,EAAO;IAC3BA,CAAC,CAACC,cAAF;IACAjB,QAAQ,CAACX,UAAU,CAAC;MAAEyB,GAAG,EAAEtB,MAAP;MAAeE,IAAI,EAAJA,IAAf;MAAqBE,KAAK,EAALA,KAArB;MAA4BE,OAAO,EAAPA;IAA5B,CAAD,CAAX,CAAR;EACD,CAHD;;EAKA,oBACE,uDACE,oBAAC,IAAD;IAAM,EAAE,EAAC,iBAAT;IAA2B,SAAS,EAAC,oBAArC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,aADF,eAIE,oBAAC,aAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,eADF,EAEGS,aAAa,iBAAI,oBAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFpB,EAGGC,WAAW,iBAAI,oBAAC,OAAD;IAAS,OAAO,EAAC,QAAjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAA2BA,WAA3B,CAHlB,EAIGL,OAAO,gBACN,oBAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADM,GAEJC,KAAK,gBACP,oBAAC,OAAD;IAAS,OAAO,EAAC,QAAjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAA2BA,KAA3B,CADO,gBAGP,oBAAC,IAAD;IAAM,QAAQ,EAAEW,aAAhB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,IAAD,CAAM,KAAN;IAAY,SAAS,EAAC,MAAtB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,IAAD,CAAM,KAAN;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,UADF,eAEE,oBAAC,IAAD,CAAM,OAAN;IACE,IAAI,EAAC,MADP;IAEE,WAAW,EAAC,YAFd;IAGE,KAAK,EAAErB,IAHT;IAIE,QAAQ,EAAE,kBAACsB,CAAD;MAAA,OAAOrB,OAAO,CAACqB,CAAC,CAACE,MAAF,CAASC,KAAV,CAAd;IAAA,CAJZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFF,CADF,eAWE,oBAAC,IAAD,CAAM,KAAN;IAAY,SAAS,EAAC,OAAtB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,IAAD,CAAM,KAAN;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,mBADF,eAEE,oBAAC,IAAD,CAAM,OAAN;IACE,IAAI,EAAC,OADP;IAEE,WAAW,EAAC,aAFd;IAGE,KAAK,EAAEvB,KAHT;IAIE,QAAQ,EAAE,kBAACoB,CAAD;MAAA,OAAOnB,QAAQ,CAACmB,CAAC,CAACE,MAAF,CAASC,KAAV,CAAf;IAAA,CAJZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFF,CAXF,eAqBE,oBAAC,IAAD,CAAM,KAAN;IAAY,SAAS,EAAC,SAAtB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,IAAD,CAAM,KAAN;IACE,IAAI,EAAC,UADP;IAEE,KAAK,EAAC,UAFR;IAGE,OAAO,EAAErB,OAHX;IAIE,QAAQ,EAAE,kBAACkB,CAAD;MAAA,OAAOjB,UAAU,CAACiB,CAAC,CAACE,MAAF,CAASE,OAAV,CAAjB;IAAA,CAJZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,CArBF,eA8BE,oBAAC,MAAD;IAAQ,IAAI,EAAC,QAAb;IAAsB,OAAO,EAAC,SAA9B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,YA9BF,CATJ,CAJF,CADF;AAoDD,CAhGD;;AAkGA,eAAe7B,cAAf"},"metadata":{},"sourceType":"module"}